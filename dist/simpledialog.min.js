/*!
 * jQuery.SimpleDialog
 * -------------------
 * @version 0.9.1
 * @require jQuery
 * @license MIT License
 * @author mach3 <http://github.com/mach3>
 * @url http://github.com/mach3/simpledialog.js
 */

 !function(a,b,c){a.SimpleDialog=function(a){this.initialize(a)},function(){this.node=null,this.dialog=null,this.overlay=null,this.offset=null,this.actions=["init","open","close","destroy"],this.options={className:"simple-dialog",width:640,overlayColor:"#000",overlayOpacity:.8,zIndex:1e3,effect:"fade",openEasing:"swing",openDuration:300,closeEasing:"swing",closeDuration:100,destroyOnClose:!1,closeButton:".button-close",closeOnClickOverlay:!0},this.effects={fade:function(a){var b=this.getEffectOptions(a);a?this.dialog.css({visibility:"visible",opacity:0}).animate({opacity:1},b):this.dialog.animate({opacity:0},b)},none:function(a){var b=a?"visible":"hidden";this.dialog.css("visibility",b)}},this.initialize=function(b){this.node=b,this.options=a.extend({},this.options)},this.init=function(a){this.config(a),this.getOverlay(),this.getDialog()},this.open=function(a){this.init(a),this.overlay.show(),this.dialog.css(this.getOffset()),this.effects[this.get("effect")].call(this,!0)},this.close=function(){var a=this;this.effects[this.get("effect")].call(this,!1),this.get("destroyOnClose")&&this.node.on("dialogClose",function(){a.destroy()}),this.overlay.hide()},this.destroy=function(){this.overlay.remove(),this.dialog.remove()},this.config=function(b){a.extend(this.options,b)},this.get=function(a){return this.options[a]},this.getOverlay=function(){return this.overlay||(this.overlay=a("<div>").css({display:"none",position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundColor:this.get("overlayColor"),opacity:this.get("overlayOpacity"),zIndex:this.get("zIndex")}).prependTo("body"),this.get("closeOnClickOverlay")&&this.overlay.on("click",a.proxy(this.close,this))),this.overlay},this.getDialog=function(){return this.dialog||(this.dialog=a("<div>").css({position:"absolute",visibility:"hidden",width:this.get("width"),zIndex:this.get("zIndex")+1}).addClass(this.get("className")).append(this.node).insertAfter(this.overlay).on("click",this.get("closeButton"),a.proxy(this.close,this))),this.dialog},this.getOffset=function(){var d={scroll:a(window).scrollTop(),width:b.innerWidth||c.documentElement.clientWidth,height:b.innerHeight||c.documentElement.clientHeight};return this.offset={width:this.dialog.width(),height:this.dialog.height()},this.offset.left=(d.width-this.offset.width)/2,this.offset.top=(d.height-this.offset.height)/2+d.scroll,this.offset},this.getEffectOptions=function(b){var c,d;return c=b?"open":"close",d=this,{duration:this.get(c+"Duration"),easing:this.get(c+"Easing"),complete:function(){b||a(this).css("visibility","hidden"),d.node.trigger("dialog"+d._capitalize(c))}}},this._capitalize=function(a){return a.replace(/^[a-z]/,function(a){return a.toUpperCase()})}}.call(a.SimpleDialog.prototype),a.fn.dialog=function(b,c){var d;return this.data("dialog")||this.data("dialog",new a.SimpleDialog(this)),d=this.data("dialog"),a.inArray(b,d.actions)>=0&&d[b](c),this}}(jQuery,window,document),function(a){var b=a.SimpleDialog.prototype.effects;b.slide=function(b){var c=this.getEffectOptions(b);b?(c.always=function(){a(this).css("overflow","visible")},this.dialog.stop().css({visibility:"visible",overflow:"hidden",top:this.offset.top+this.offset.height/2,height:0}).animate({top:this.offset.top,height:this.offset.height},c)):(c.always=function(){a(this).css({visibility:"hidden",height:"auto"})},this.dialog.stop().animate({top:this.offset.top+this.offset.height/2,height:0},c))}}(jQuery);